****************************************************************************************************
SEQUENCE STEP SCHEDULE
generated on 16/09/2018 10:25:52 AM by David Paspa
****************************************************************************************************





--------------------------------------------------
SEQUENCE
--------------------------------------------------

SFCNo:- 3
Title:- RP_PCMX_CIPSIP
Description:- Recipe Procedure for Equipment CIP and SIP
Name:- CIPSIP
Class:- PCMX
Level:- RP
STEP_LIST_FORMAT:- JU    S0@@STEP_NUM@@; // STEP-0@@STEP_NUM@@:
ACT_LIST_FORMAT:- JU    @@ACT_CODE@@@@STEP_NUM@@; //ACTION-@@ACT_NUM@@
HeaderName:- PCMCIP
Version:- 0.4
RevisionHistory:- // SFC Revision History:
// Rev By               Date        CC         Note
// 0.4 Srinivas Nimmala 22-Jan-2010 CC-10/005  Added Hpn2 pulse delay timer
// 0.3 Srinivas Nimmala 22-Dec-2009 CC-09/071  Disable cooling after Hpn2 purge
// 0.3 Steve Linehan    22-Dec-2009 CC-09/070  Disable the agitator before empties the vessel
// 0.2 David Paspa      26-Oct-2009            Added synch flags
// 0.1 Gerald Kontriner 18-Sep-2009            SFC structural design
HMI_FORMAT:- @@STEP_NUM_INT@@,@@STEP_TITLE@@

--------------------------------------------------
PARAMETER::1
--------------------------------------------------
Name:- vessel_mx
Type:- INT
Description:- Manufacturing vessel selection M1 or M2
ParameterInOut:- IN

--------------------------------------------------
PARAMETER::2
--------------------------------------------------
Name:- release_mx
Type:- BOOL
Description:- Release Mx
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::3
--------------------------------------------------
Name:- log_msg_cipsip_begin
Type:- BOOL
Description:- RP_PCMX_CIPSIP begin time
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::4
--------------------------------------------------
Name:- log_msg_cipsip_end
Type:- BOOL
Description:- RP_PCMX_CIPSIP end time
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::5
--------------------------------------------------
Name:- log_msg_sip_sy_end
Type:- BOOL
Description:- RP_PCMX_CIPSIP Sterilisation SY end
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::6
--------------------------------------------------
Name:- log_msg_sip_sy_begin
Type:- BOOL
Description:- RP_PCMX_CIPSIP Sterilisation SY begin
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::7
--------------------------------------------------
Name:- log_msg_vacuum_sy_end
Type:- BOOL
Description:- RP_PCMX_CIPSIP Vacuum SY end
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::8
--------------------------------------------------
Name:- log_msg_vacuum_sy_begin
Type:- BOOL
Description:- RP_PCMX_CIPSIP Vacuum SY begin
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::9
--------------------------------------------------
Name:- log_msg_sip_mx_end
Type:- BOOL
Description:- RP_PCMX_CIPSIP Sterilisation MX end
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::10
--------------------------------------------------
Name:- log_msg_sip_mx_begin
Type:- BOOL
Description:- RP_PCMX_CIPSIP Sterilisation MX begin
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::11
--------------------------------------------------
Name:- log_msg_vacuum_mx_end
Type:- BOOL
Description:- RP_PCMX_CIPSIP Vacuum MX end
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::12
--------------------------------------------------
Name:- log_msg_vacuum_mx_begin
Type:- BOOL
Description:- RP_PCMX_CIPSIP Vacuum MX begin
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::13
--------------------------------------------------
Name:- log_msg_vacuum_hold_end
Type:- BOOL
Description:- RP_PCMX_CIPSIP Vacuum Hold Test end
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::14
--------------------------------------------------
Name:- log_msg_vacuum_hold_begin
Type:- BOOL
Description:- RP_PCMX_CIPSIP Vacuum Hold Test begin
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::15
--------------------------------------------------
Name:- prompt_abort
Type:- BOOL
Description:- RP_PCMX_CIPSIP Operator to confirm abort due to invalid Hygiene Status
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::16
--------------------------------------------------
Name:- prompt_abort_confirm_yes
Type:- BOOL
Description:- RP_PCMX_CIPSIP Operator confirmed to abort due to invalid Hygiene Status
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::17
--------------------------------------------------
Name:- log_msg_wrong_hygiene
Type:- BOOL
Description:- RP_PCMX_CIPSIP Mixing Vessel Unit has incorrect Hygiene Status
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::18
--------------------------------------------------
Name:- mx_vessel_hygiene
Type:- INT
Description:- Hygiene Status of unit Mx
ParameterInOut:- IN_OUT

--------------------------------------------------
PARAMETER::19
--------------------------------------------------
Name:- mx_vessel_state
Type:- INT
Description:- Device State of unit Mx
ParameterInOut:- IN

--------------------------------------------------
PARAMETER::20
--------------------------------------------------
Name:- mx_vessel_subs
Type:- INT
Description:- Substate selection to unit Mx
ParameterInOut:- OUT

--------------------------------------------------
PARAMETER::21
--------------------------------------------------
Name:- mx_vessel_cmd
Type:- INT
Description:- Command to unit Mx
ParameterInOut:- OUT


--------------------------------------------------
STEP::01
--------------------------------------------------
StepNo:- 01
Title:- RP_PCMX_CIPSIP : Recipe Procedure Commenced
Description:- Log product manufacture operation begin time.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Log product manufacture operation begin time.
Action:- //Log CIPSIP operation begin
SET;
S #_log_msg_cipsip_begin;
Verification:- A "uncondJump";


--------------------------------------------------
TRANSITION::01
--------------------------------------------------
TRNNo:- 01
Title:- Check Hygiene Status
EmptyTransition:- False
Description:- SMS1 and selected Mx is in Hygiene status USED?
Condition:- A(;
L  "dbCONST".BLK.HYGIENE.USED;
L #_mx_vessel_hygiene;
==I;
);	


--------------------------------------------------
TRANSITION::02
--------------------------------------------------
TRNNo:- 02
Title:- Incorrect Hygiene Status
EmptyTransition:- False
Description:- Empty Transition
Condition:- A "uncondJump";


--------------------------------------------------
STEP::02
--------------------------------------------------
StepNo:- 02
Title:- RP_PCMX_CIPSIP : Incorrect Hygiene Status
Description:- Log equipment is not in Hygiene status USED.
Prompt operator to confirm abort.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Log equipment is not in Hygiene status USED.
Send message to HMI
Action:- //Log time if one or more units not in correct Hygiene status USED
SET;
S #_log_msg_wrong_hygiene;
S #_prompt_abort;
Verification:- A "uncondJump";


--------------------------------------------------
TRANSITION::03
--------------------------------------------------
TRNNo:- 03
Title:- Confirm Abort (Incorrect Hygiene Status)
EmptyTransition:- False
Description:- Confirm Abort (Incorrect Hygiene Status)
Condition:- A #_prompt_abort_confirm_yes;


--------------------------------------------------
STEP::03
--------------------------------------------------
StepNo:- 03
Title:- RP_PCMX_CIPSIP : Initiate SETUP operations
Description:- Initiate Unit Operations;
MX STATE=SETUP.


--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Reset the Mx Unit.
Action:- L "dbCONST".BLK.CMD.STOP;
T #_mx_vessel_cmd;
Verification:- A(;
L #_mx_vessel_state;
L "dbCONST".BLK.STATE.STOPPED;
==I;
);

--------------------------------------------------
ACTION::02
--------------------------------------------------
Description:- Initiate Unit Operations
MX STATE=SETUP

Action:- //Initiate Unit Operation for unit Mx
L "dbCONST".BLK.MX.SUBS.SETUP;
T #_mx_vessel_subs;
L "dbCONST".BLK.CMD.START;
T #_mx_vessel_cmd;
Verification:- A(;
L #_mx_vessel_subs;
L "dbCONST".BLK.MX.SUBS.SETUP;
==I;
);


--------------------------------------------------
TRANSITION::04
--------------------------------------------------
TRNNo:- 04
Title:- SETUP operations complete?
EmptyTransition:- False
Description:- All setup operations are complete. 
Condition:- A(;
L 	#_mx_vessel_state;
L 	"dbCONST".BLK.STATE.COMPLETED;
==I;
);


--------------------------------------------------
STEP::04
--------------------------------------------------
StepNo:- 04
Title:- RP_PCMX_CIPSIP : Initiate Mx CIP Unit Operations
Description:- Set Units Mx Hygiene Satus to CIP.
Initiate Mx CIP Unit Operation.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Reset the Mx Unit.
Action:- L "dbCONST".BLK.CMD.STOP;
T #_mx_vessel_cmd;
Verification:- A(;
L #_mx_vessel_state;
L "dbCONST".BLK.STATE.STOPPED;
==I;
);

--------------------------------------------------
ACTION::02
--------------------------------------------------
Description:- MFL unit ready for flushing
Action:- //Set Mx equipment to Hygiene Status to CIP
L "dbCONST".BLK.HYGIENE.CIP;
T #_mx_vessel_hygiene;

//Initiate Unit Operation for Mx CIP
L "dbCONST".BLK.MX.SUBS.CIP;
T #_mx_vessel_subs;
L "dbCONST".BLK.CMD.START;
T #_mx_vessel_cmd;
Verification:- A(;
L #_mx_vessel_subs;
L "dbCONST".BLK.MX.SUBS.CIP;
==I;
);


--------------------------------------------------
TRANSITION::05
--------------------------------------------------
TRNNo:- 05
Title:- Mx CIP operations complete
EmptyTransition:- False
Description:- MX CIP operations complete 
Condition:- A(;
L #_mx_vessel_state;
L "dbCONST".BLK.STATE.COMPLETED;;
==I;
);


--------------------------------------------------
STEP::05
--------------------------------------------------
StepNo:- 05
Title:- RP_PCMX_CIPSIP : Set Mx Hygiene Status to CLEAN
Description:- Set Mx Hygiene status to CLEAN.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Set Mx Hygiene status to CLEAN.
Action:- //Set Sy hygiene status to CLEAN
L "dbCONST".BLK.HYGIENE.CLEAN;
T #_mx_vessel_hygiene;
Verification:- A "uncondJump";


--------------------------------------------------
TRANSITION::06
--------------------------------------------------
TRNNo:- 06
Title:- Empty Transition
EmptyTransition:- False
Description:- Empty Transition
Condition:- A "uncondJump";


--------------------------------------------------
STEP::06
--------------------------------------------------
StepNo:- 06
Title:- RP_PCMX_CIPSIP : Initiate MX SIP Operations
Description:- Initiate MX SIP Operations.
MX STATE=SIP

Set MX Hygiene Status to SIP.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Action Description
Action:- L "dbCONST".BLK.CMD.STOP;
T #_mx_vessel_cmd;
Verification:- A(;
L #_mx_vessel_state;
L "dbCONST".BLK.STATE.STOPPED;
==I;
);

--------------------------------------------------
ACTION::02
--------------------------------------------------
Description:- Initiate MX SIP Operations.
MX STATE=SIP

Set MX Hygiene Status to SIP.
Action:- //Initiate MX SIP Operations.
L "dbCONST".BLK.MX.SUBS.SIP;
T #_mx_vessel_subs;
L "dbCONST".BLK.MX.CMD.START;
T #_mx_vessel_cmd;


//Set Mx hygiene status to SIP
L "dbCONST".BLK.HYGIENE.SIP;
T #_mx_vessel_hygiene;
Verification:- A(;
L #_mx_vessel_subs;
L "dbCONST".BLK.MX.SUBS.SIP;
==I;
);


--------------------------------------------------
TRANSITION::07
--------------------------------------------------
TRNNo:- 07
Title:- Mx state SIP complete?
EmptyTransition:- False
Description:- Wait for Mx_UO_SIP complete.
Condition:- A(;
L   #_mx_vessel_state;
L   "dbCONST".BLK.STATE.COMPLETED;
==I;
);


--------------------------------------------------
STEP::07
--------------------------------------------------
StepNo:- 07
Title:- RP_PCMX_CIPSIP : MX SIP complete
Description:- Set Mx Hygiene Status = STERILE
Release Mx.

Set End of the sip completion for batch report

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Set Mx Hygiene Status = STERILE
Release Mx.

Set End of the sip completion for batch report
Setting the event for the batch report
Action:- //Set Mx hygiene status to STERILE.
L "dbCONST".BLK.HYGIENE.STERILE;
T #_mx_vessel_hygiene;

//Release Mx.
SET;
S #_release_mx;

//Report Event Set
SET;
S #_log_msg_sip_mx_end;
Verification:- A "uncondJump";


--------------------------------------------------
TRANSITION::08
--------------------------------------------------
TRNNo:- 08
Title:- Empty Transition
EmptyTransition:- False
Description:- Empty Transition
Condition:- A "uncondJump";


--------------------------------------------------
STEP::08
--------------------------------------------------
StepNo:- 08
Title:- RP_PCMX_CIPSIP : Recipe Procedure Completed
Description:- Sequence END.
Log product manufacture operation end time.
Reset all used flags

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Reset all used flags
Action:- //Log CIPSIP operation end time.
SET;
S #_log_msg_cipsip_end;


//Clear used flags
SET;
R #_prompt_abort;
R #_prompt_abort_confirm_yes;
Verification:- A "uncondJump";

****************************************************************************************************
END SSS REPORT
****************************************************************************************************
