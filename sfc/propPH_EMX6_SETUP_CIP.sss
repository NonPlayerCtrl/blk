****************************************************************************************************
SEQUENCE STEP SCHEDULE
generated on 13/03/2019 3:52:44 PM by David Paspa
****************************************************************************************************





--------------------------------------------------
SEQUENCE
--------------------------------------------------

Name:- SETUP_CIP
Title:- PH_EMX6_SETUP_CIP
Description:- Setup Manufacturing Filtration line flowpath for CIP
Class:- EMX6
Level:- PH
STEP_LIST_FORMAT:- JU    S0@@STEP_NUM@@; // STEP-0@@STEP_NUM@@:
ACT_LIST_FORMAT:- JU    @@ACT_CODE@@@@STEP_NUM@@; //ACTION-@@ACT_NUM@@
HeaderName:- X6_CSET
Version:- 2.0
RevisionHistory:- // SFC Revision History:
// Rev By               Date        CC         Note
// 2.0 David Paspa      27-Nov-2018            Reboot for S7-1500
// 0.4 Khairul Basar    07-Sep-2009 CC-09/023  confirm_CIPinout flag is reset in Step1.
// 0.3 Khairul Basar    25-Aug-2009 CC-09/023  Change in Verific,& TRN code OR to AND
//                                             Change in the Last step.
// 0.2 Khairul Basar    18-Aug-2009            Added logic code
// 0.1 David Paspa      13-Jul-2009            SFC structural design
HMI_FORMAT:- @@STEP_NUM_INT@@,@@STEP_TITLE@@

--------------------------------------------------
PARAMETER::1
--------------------------------------------------
Name:- zsc_drain_cmd
Type:- INT
Description:- Drain connection command
ParameterInOut:- OUT

--------------------------------------------------
PARAMETER::2
--------------------------------------------------
Name:- zsc_filter_cmd
Type:- INT
Description:- Filter connection command
ParameterInOut:- OUT

--------------------------------------------------
PARAMETER::3
--------------------------------------------------
Name:- log_msg_confirm_connect
Type:- BOOL
Description:- PH_EMX6_SETUP_CIP Operator to confirm CIP path connected confirmed yes
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::4
--------------------------------------------------
Name:- log_msg_setup_cip_begin
Type:- BOOL
Description:- PH_EMX6_SETUP_CIP begin time
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::5
--------------------------------------------------
Name:- log_msg_setup_cip_end
Type:- BOOL
Description:- PH_EMX6_SETUP_CIP end time
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::6
--------------------------------------------------
Name:- zsc_drain_state
Type:- INT
Description:- CIP connection sensor switch.
ParameterInOut:- IN

--------------------------------------------------
PARAMETER::7
--------------------------------------------------
Name:- prompt_connect_cip_confirm_yes
Type:- BOOL
Description:- PH_EMX6_SETUP_CIP Operator to confirm CIP path connected confirmed yes
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::8
--------------------------------------------------
Name:- prompt_connect_cip
Type:- BOOL
Description:- PH_EMX6_SETUP_CIP Operator to confirm CIP path connected
ParameterInOut:- VAR


--------------------------------------------------
STEP::01
--------------------------------------------------
StepNo:- 01
Title:- PH_EMX6_SETUP_CIP : SETUP CIP begin.
Description:- Command keypiece devices to required states.
Log SETUP CIP begin time.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Command keypiece devices to required states.
Log SETUP CIP begin time.
Action:- //Log SETUP CIP begin time.
SET;
S #_log_msg_setup_cip_begin;

// Send IN command to DRAIN zsc.
L "dbCONST".BLK.ZSC2.CMD.IN;
T  #_zsc_drain_cmd;

// Send OUT command to FILTER zsc.
L "dbCONST".BLK.ZSC2.CMD.OUT;
T #_zsc_filter_cmd;
Verification:- A "uncondJump";


--------------------------------------------------
TRANSITION::01
--------------------------------------------------
TRNNo:- 01
Title:- Unconditional Jump
EmptyTransition:- False
Description:- Jump
Condition:- A "uncondJump";


--------------------------------------------------
STEP::02
--------------------------------------------------
StepNo:- 02
Title:- PH_EMX6_SETUP_CIP : Prompt to connect SMFLx CIP flowpath 
Description:- Prompt Operator to connect CIP flowpath jumpers
MMFLx to CIP Drain: ZSCx111

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Prompt operator to connect CIP flowpath ZSCx111
Action:- //Prompt to connect CIP.
SET;
S #_prompt_connect_cip;


--------------------------------------------------
TRANSITION::02
--------------------------------------------------
TRNNo:- 02
Title:- Operator confirmation
EmptyTransition:- False
Description:- Wait for operator to confirm connections has been made.
Condition:- A #_prompt_connect_cip_confirm_yes;


--------------------------------------------------
STEP::03
--------------------------------------------------
StepNo:- 03
Title:- PH_EMX6_SETUP_CIP : Check connection
Description:- Log operator confirmation and continue to check connection.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Log operator confirmation and continue to check connection.
Action:- SET;
S #_log_msg_confirm_connect;
Verification:- A "uncondJump";


--------------------------------------------------
TRANSITION::03
--------------------------------------------------
TRNNo:- 03
Title:- Connection correctly inserted
EmptyTransition:- False
Description:- Jump if correct switch ZSCx111 connected
Condition:- //Verify the correct switch connected.
A(    ;
L #_zsc_drain_state;
L "dbCONST".BLK.ZSC2.STATE.IN;
      ==I ;  
  )     ;


--------------------------------------------------
TRANSITION::04
--------------------------------------------------
TRNNo:- 04
Title:- Operator not setup correctly
EmptyTransition:- False
Description:- Jump unconditionally, the connections are not made correctly
Condition:- A "uncondJump";


--------------------------------------------------
STEP::04
--------------------------------------------------
StepNo:- 04
Title:- PH_EMX6_SETUP_CIP : Last Step
Description:- Log SETUP CIP operation end time.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Log SETUP CIP operation end time.
Action:- //Log SETUP CIP operation end time.
SET;
S #_log_msg_setup_cip_end;
Verification:- A "uncondJump";

****************************************************************************************************
END SSS REPORT
****************************************************************************************************
