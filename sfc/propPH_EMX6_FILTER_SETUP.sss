****************************************************************************************************
SEQUENCE STEP SCHEDULE
generated on 14/02/2018 6:17:45 PM by David Paspa
****************************************************************************************************





--------------------------------------------------
SEQUENCE
--------------------------------------------------

Name:- FILTER_SETUP
Title:- Setup MMFLx for Filtration
Description:- Setup MMFLx for Filtration
Class:- PH
Level:- EMX6
STEP_LIST_FORMAT:- JU    S0@@STEP_NUM@@; // STEP-0@@STEP_NUM@@:
ACT_LIST_FORMAT:- JU    @@ACT_CODE@@@@STEP_NUM@@; //ACTION-@@ACT_NUM@@
HeaderName:- X1PFILT
Version:- 0.4
RevisionHistory:- // SFC Revision History:                                                      //
// Rev By               Date        CC        Note                            //
// 2.0 David Paspa      30-Jan-2018 NA        Reboot for S7-1500.             //
// 0.4 Khairul Basar    07-Sep-2009 CC-09/023 Prompt_filter is reset in Step2.//
// 0.3 Khairul Basar    25-Aug-2009 CC-09/023 Change in Verific,& TRN code OR //
//                                            to AND Change in the Last step. //
// 0.2 Khairul Basar    18-Aug-2009           Added logic code.               //
// 0.1 David Paspa      13-Jul-2009           SFC structural design.          //
HMI_FORMAT:- @@STEP_NUM_INT@@,@@STEP_TITLE@@

--------------------------------------------------
PARAMETER::1
--------------------------------------------------
Name:- CIP_Interlock_Armed
Type:- BOOL
Description:- CIP interlock armed flag
ParameterInOut:- IN_OUT

--------------------------------------------------
PARAMETER::2
--------------------------------------------------
Name:- MMFLx_Interlock_Armed
Type:- BOOL
Description:- Filter interlock armed flag
ParameterInOut:- IN_OUT

--------------------------------------------------
PARAMETER::3
--------------------------------------------------
Name:- MMFLx_Switch_State
Type:- INT
Description:- Filter connection sensor switch.
ParameterInOut:- IN

--------------------------------------------------
PARAMETER::4
--------------------------------------------------
Name:- confirm_filter
Type:- BOOL
Description:- Confirmation on filter connection
ParameterInOut:- VAR

--------------------------------------------------
PARAMETER::5
--------------------------------------------------
Name:- prompt_filter
Type:- BOOL
Description:- Prompt operator
ParameterInOut:- VAR


--------------------------------------------------
STEP::01
--------------------------------------------------
StepNo:- 01
Title:- PH_EMX6_FILTER_SETUP : Prompt operator to connect jumpers
Description:- Prompt operator to connect jumpers on SP11:
Pre-Filter: ZSCx109

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Prompt operator to connect the filter
Action:- //Prompt to connect filter.
SET;
S #_prompt_filter;
R #_confirm_filter;

//Reset filter and CIP interlock armed flag
R #_CIP_Interlock_Armed;
R #_MMFLx_Interlock_Armed;
Verification:- A M1.1; //Always High flag


--------------------------------------------------
TRANSITION::01
--------------------------------------------------
TRNNo:- 01
Title:- Operator confirmation
EmptyTransition:- False
Description:- Wait for operator to confirm jumper connected.
Condition:-  A #_confirm_filter ;


--------------------------------------------------
TRANSITION::03
--------------------------------------------------
TRNNo:- 03
Title:- Operator not setup correctly
EmptyTransition:- 0.0000
Description:- Jump unconditionally, the connections are not made correctly
Condition:- //None
A M1.1 ;// Always High Bit


--------------------------------------------------
STEP::02
--------------------------------------------------
StepNo:- 02
Title:- PH_EMX6_FILTER_SETUP : Check connection
Description:- Check connection

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Reset prompt filter.
Action:- SET;
R  #prompt_filter;
Verification:- A M1.1; //Always High flag


--------------------------------------------------
TRANSITION::02
--------------------------------------------------
TRNNo:- 02
Title:- Connection correctly inserted
EmptyTransition:- False
Description:- Jump if correct switch ZSCx109 connected
Condition:- //Verify the correct switch connected.
A(    ;
L #MMFLx_Switch_State;
L "dbCONST_VAL".CM.ZSC2_DEV_STATE.IN;
      ==I ;  
  )     ;


--------------------------------------------------
STEP::03
--------------------------------------------------
StepNo:- 03
Title:- PH_EMX6_FILTER_SETUP : Setup Completed
Description:- Enable flowpath interlock armed flag.

--------------------------------------------------
ACTION::01
--------------------------------------------------
Description:- Set the filter interlock armed flag 
Action:- SET;
S #_MMFLx_Interlock_Armed;
Verification:- A M1.1;



--------------------------------------------------
TRANSITION::04
--------------------------------------------------
TRNNo:- 4.0000
Title:- Phase Finish Normal
EmptyTransition:- False
Description:- Phase Finish Normal
Condition:- A M1.1; //Always High flag


--------------------------------------------------
STEP::04
--------------------------------------------------
StepNo:- 04
Title:- PH_EMX6_FILTER_SETUP : Last Step
Description:- Last Step

--------------------------------------------------
ACTION::01
--------------------------------------------------
Action:- SET;
R  #_confirm_filter ;
R #_prompt_filter;
Verification:- A M1.1;


****************************************************************************************************
END SSS REPORT
****************************************************************************************************
